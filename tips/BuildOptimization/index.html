<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Cabulas"/><link rel="canonical" href="https://jjorgemoura.com/tips/BuildOptimization"/><meta name="twitter:url" content="https://jjorgemoura.com/tips/BuildOptimization"/><meta name="og:url" content="https://jjorgemoura.com/tips/BuildOptimization"/><title>Build Optimization | Cabulas</title><meta name="twitter:title" content="Build Optimization | Cabulas"/><meta name="og:title" content="Build Optimization | Cabulas"/><meta name="description" content="I'm an iOS Software Engineer based in London"/><meta name="twitter:description" content="I'm an iOS Software Engineer based in London"/><meta name="og:description" content="I'm an iOS Software Engineer based in London"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Cabulas"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">Cabulas</a><nav><ul><li><a href="/articles">Articles</a></li><li><a href="/manifestos">Manifestos</a></li><li><a class="selected" href="/tips">Tips</a></li><li><a href="/about">About</a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>Build Optimization</h1><p>Since the launch of Swift, several performance and quality issues has stuck Xcode. Those are mainly:</p><ul><li>build/compilation time</li><li>code completion</li><li>syntax highlight</li><li>debug variable inspect</li></ul><h2>How to improve Build / Compilation times (configuration)</h2><p>Let's start with Swift. It is well know some performance issues with Swift.</p><p><a href="https://medium.com/@RobertGummesson/regarding-swift-build-time-optimizations-fc92cdd91e31">Several</a> articles point out how <strong>Ternary</strong> or <strong>Nil Coalescing Operators</strong>, <strong>String concatination</strong>, among others, hurt build times.</p><p>Now, how about Xcode build paramaters?</p><p>For Swift, the starting point must be the <a href="https://swift.org/blog/whole-module-optimizations/">Whole Module Optimization</a> setting.</p><p>However, we need to be careful. The Whole Module Optimization is a good build setting because it groups all the code in one file and only after compiles everything, knowing so all the deep details of the code and therefore be able to optimize all the code. However, that means if we only change a line in class and tap build again it will build everything instead of just perform a incremental build.</p><p>Problem is with WMO, debug will not work properly after. For debug we need to set the optimization level as none.</p><p>In resume:</p><ul><li>set: <em>Optimization Level</em> as <code>Whole Module Optimization</code> for debug+release (in Swift Compiler) and set <em>Other Swift Flags</em> as <code>-Onone</code> for Debug only.</li></ul><p><strong>NOTE:</strong> For Swift code, we need to set the none flag diferently. We need to set the setting <code>Other Swift Flags</code> as <code>-Onone</code>.</p><ul><li>set: <em>Build Active Architecture Only</em> as <code>YES</code> for debug only.</li></ul><h3>Measure build time</h3><p><a href="https://www.jessesquires.com/blog/measuring-compile-times-xcode9/">This</a> is a really useful trick to help you measuring the compilation time by file.</p><h3>Debug symbols</h3><p>In this <a href="https://hackernoon.com/speed-up-swift-compile-time-6f62d86f85e6">article</a> the author claims we should set for Xcode to generate the dSYM file for the <code>debug</code> configuration. It seems Xcode, when create a new project, also set this setting that way.</p><h4>code completion + syntax highlight</h4><p>Here there isn't much we can do. The problem is with SourceKit. One good thing is to avoid having weird code (Libraries) in order that the code parse (through SourceKit) and compilation doesn't crash.</p><h4>Debug variable inspect</h4><p>One big problem is related with libraries/frameworks and how to debug (e.g., inspect variables) from inside the those libraries/frameworks.</p><p>This could be influenced by Carthage and the way we set the 3rd party Libraries.</p><h4>Xcode lag</h4><p><a href="https://twitter.com/kharrison/status/927506735258112000">Tip</a> from Apple?</p><h2>Extra Resources:</h2><p><a href="https://github.com/fastred/Optimizing-Swift-Build-Times">https://github.com/fastred/Optimizing-Swift-Build-Times</a></p><p><a href="https://useyourloaf.com/blog/swift-whole-module-optimization/">https://useyourloaf.com/blog/swift-whole-module-optimization/</a></p><p><a href="https://jobs.zalando.com/tech/blog/improving-swift-compilation-times-from-12-to-2-minutes/?gh_src=4n3gxh1">https://jobs.zalando.com/tech/blog/improving-swift-compilation-times-from-12-to-2-minutes/?gh_src=4n3gxh1</a></p><p><a href="http://developear.com/blog/2016/12/30/Speed-Swift-Compilation.html">http://developear.com/blog/2016/12/30/Speed-Swift-Compilation.html</a></p><p><a href="http://roadfiresoftware.com/2017/01/improving-swift-compile-times/">http://roadfiresoftware.com/2017/01/improving-swift-compile-times/</a></p><p><a href="http://roadfiresoftware.com/2016/10/cut-your-swift-build-times-in-half-with-this-one-weird-trick/">http://roadfiresoftware.com/2016/10/cut-your-swift-build-times-in-half-with-this-one-weird-trick/</a></p><p><a href="https://jobs.zalando.com/tech/blog/improving-swift-compilation-times-from-12-to-2-minutes/">https://jobs.zalando.com/tech/blog/improving-swift-compilation-times-from-12-to-2-minutes/</a></p><p><a href="https://hackernoon.com/speed-up-swift-compile-time-6f62d86f85e6">https://hackernoon.com/speed-up-swift-compile-time-6f62d86f85e6</a></p><p><a href="https://www.jessesquires.com/blog/measuring-compile-times-xcode9/">https://www.jessesquires.com/blog/measuring-compile-times-xcode9/</a></p></div><span>Tagged with: </span><ul class="tag-list"></ul></article></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a>. This site is 100% Javascript free.</p><p>@ 2020 Jorge Moura.</p></footer></body></html>