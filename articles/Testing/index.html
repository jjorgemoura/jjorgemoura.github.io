<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Cabulas"/><link rel="canonical" href="https://jjorgemoura.com/articles/Testing"/><meta name="twitter:url" content="https://jjorgemoura.com/articles/Testing"/><meta name="og:url" content="https://jjorgemoura.com/articles/Testing"/><title>Tests Best Practices | Cabulas</title><meta name="twitter:title" content="Tests Best Practices | Cabulas"/><meta name="og:title" content="Tests Best Practices | Cabulas"/><meta name="description" content="I'm an iOS Software Engineer based in London"/><meta name="twitter:description" content="I'm an iOS Software Engineer based in London"/><meta name="og:description" content="I'm an iOS Software Engineer based in London"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Cabulas"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">Cabulas</a><nav><ul><li><a href="/posts">Posts</a></li><li><a class="selected" href="/articles">Articles</a></li><li><a href="/tips">Tips</a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>Tests Best Practices</h1><p>There are several types of tests. Let's have a better look of some of them:</p><ul><li>Unit Tests</li><li>Snapshot Tests</li><li>UI Tests</li></ul><h3>Unit Tests</h3><p>The simplest type of tests. Tests a unit of code. I would say it tests each public method of a class.</p><p>Could need to use expectations to tests asynchronous code.</p><p>All the network calls must be mocked.</p><h3>Snapshot Tests</h3><p>Very similar to unit tests but to test UIViews/UIViewControllers.</p><p>All data should be mocked.</p><h3>UI Tests</h3><p>In other to make all the UI Tests more robust and independent, it better to mock all the network calls.</p><p>The problem with UI Testing is with the way Apple has set it up. We got the app running in a process and the tests in another. The communication is done through the accessibility capabilities built into UIKit. That means we can not inject mocks or stub networks calls the way we usually do with unit tests.</p><p>It seems there are two options. They are:</p><ul><li>Add test resources into main app and control it via environment variable</li><li>Run a server locally</li></ul><p>The first option is not good at all. We need to ship, in the main target, all the data to handle the test mocks (json, etc) for the UI tests and using an environment variable to indicate if we are running tests or not.</p><p>The second option is much better however requires some extra setup. One of the best know servers is WireMock. There are some opinions saying we can also write our own server using Vapor. The advantage is having all control and using Swift all over the place, client side as well as in server side. Better check my other <a href="https://gist.github.com/jjorgemoura/c89a67b204b303232c41f4b6f2b0a516">gists</a>.</p><h3>Others</h3><p>It seems nowadays the integration tests have lost some importance. The main problem with them is that they became quite fragile due to the dependency of an external system, not only in terms of quality of data as well as in terms of availability.</p><h4>Resources</h4><p><a href="https://medium.com/@Tovkal/mocking-network-calls-while-ui-testing-61e8a4a07f81">https://medium.com/@Tovkal/mocking-network-calls-while-ui-testing-61e8a4a07f81</a></p><p><a href="https://gist.github.com/jjorgemoura/c89a67b204b303232c41f4b6f2b0a516">WireMock vs OHHTTPStubs</a></p></div><span>Tagged with: </span><ul class="tag-list"></ul></article></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>