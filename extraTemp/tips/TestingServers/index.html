<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Cabulas"/><link rel="canonical" href="https://jjorgemoura.com/extraTemp/tips/TestingServers"/><meta name="twitter:url" content="https://jjorgemoura.com/extraTemp/tips/TestingServers"/><meta name="og:url" content="https://jjorgemoura.com/extraTemp/tips/TestingServers"/><title>Testing | Cabulas</title><meta name="twitter:title" content="Testing | Cabulas"/><meta name="og:title" content="Testing | Cabulas"/><meta name="description" content="I'm an iOS Software Engineer based in London"/><meta name="twitter:description" content="I'm an iOS Software Engineer based in London"/><meta name="og:description" content="I'm an iOS Software Engineer based in London"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Cabulas"/></head><body><header><div class="wrapper"><a class="site-name" href="/">Cabulas</a><nav><ul><li><a href="/articles">Articles</a></li><li><a href="/manifestos">Manifestos</a></li><li><a href="/tips">Tips</a></li><li><a href="/about">About</a></li></ul></nav></div></header><div class="wrapper"><h1>Testing</h1><h2>Servers</h2><h3>WireMock vs OHHTTPStubs</h3><p><a href="http://wiremock.org">Wiremock</a> (<a href="https://github.com/tomakehurst/wiremock">github</a>) - A tool for mocking HTTP services</p><p><a href="https://github.com/AliSoftware/OHHTTPStubs">OHHTTPStubs</a> - Stub your network requests easily! Test your apps with fake network data and custom response time, response code and headers!</p><h2>Actors</h2><p>The names denounce two different approaches, a <code>mock</code> vs a <code>stub</code>.</p><p>First, let's have a look on some definitions:</p><h3>Dummy</h3><p>Just bogus values to satisfy the API.</p><blockquote><p>Example: If you're testing a method of a class which requires many mandatory parameters in a constructor which have no effect on your test, then you may create dummy objects for the purpose of creating new instances of a class.</p></blockquote><h3>Fake</h3><p>Create a test implementation of a class which may have a dependency on some external infrastructure. (It's good practice that your unit test does NOT actually interact with external infrastructure.)</p><blockquote><p>Example: Create fake implementation for accessing a database, replace it with in-memory collection.</p></blockquote><h3>Stub</h3><p>Override methods to return hard-coded values, also referred to as state-based.</p><p>I believe the biggest distinction is that a stub you have already written with predetermined behavior. So you would have a class that implements the dependency (abstract class or interface most likely) you are faking for testing purposes and the methods would just be stubbed out with set responses. They would not do anything fancy and you would have already written the stubbed code for it outside of your test.</p><blockquote><p>Example: Your test class depends on a method Calculate() taking 5 minutes to complete. Rather than wait for 5 minutes you can replace its real implementation with stub that returns hard-coded values; taking only a small fraction of the time.</p></blockquote><h3>Mock</h3><p>Very similar to Stub but interaction-based rather than state-based. This means you don't expect from Mock to return some value, but to assume that specific order of method calls are made.</p><p>A mock is something that as part of your test you have to setup with your expectations. A mock is not setup in a predetermined way so you have code that does it in your test. Mocks in a way are determined at runtime since the code that sets the expectations has to run before they do anything.</p><blockquote><p>Example: You're testing a user registration class. After calling Save, it should call SendConfirmationEmail.</p></blockquote><p>As a resume, stub is something you set as static. For example, a response to a specific request is a static json. A mock is something dynamic, that is built in runtime to return something for a specific request or call.</p><h2>Expectation</h2><p>Following these concepts, we can expect the OHHTTPStubs to be something more static, setup upfront, while the WireMock is expected to be something more flexible, dynamic and setup in runtime.</p><p>This <a href="https://medium.com/xcblog/network-stubbing-options-for-xctest-and-xcuitest-in-swift-2e0dcce9a37d">article</a> has a very good explanation about network tests.</p><p>The article points to several tools. However, lots of them are really small / incipient libs, things with just 3 starts!</p><p>I confess the Swift server side tool was a nice surprise.</p><p>At the end, it seems using Vapor is very similar with using Wire Mock, just that Vapor is a Swift server and Wire Mock a Java server.</p><p>Between OHHTTPStubs and Wire Mock, it seems we need to use a server for the UITests, so we can't use OHHTTPStubs for our UITests.</p><p>Also check <a href="https://medium.com/flawless-app-stories/the-complete-guide-to-network-unit-testing-in-swift-db8b3ee2c327">this</a> for additional info.</p></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a>. This site is 100% Javascript free.</p><p>@ 2020 Jorge Moura.</p></footer></body></html>