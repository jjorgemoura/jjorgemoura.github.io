<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Cabulas"/><link rel="canonical" href="https://jjorgemoura.com/extraTemp/GreenAnimalsArticles/LiibrariesAndFrameworks"/><meta name="twitter:url" content="https://jjorgemoura.com/extraTemp/GreenAnimalsArticles/LiibrariesAndFrameworks"/><meta name="og:url" content="https://jjorgemoura.com/extraTemp/GreenAnimalsArticles/LiibrariesAndFrameworks"/><title>Libraries and Frameworks | Cabulas</title><meta name="twitter:title" content="Libraries and Frameworks | Cabulas"/><meta name="og:title" content="Libraries and Frameworks | Cabulas"/><meta name="description" content="I'm an iOS Software Engineer based in London"/><meta name="twitter:description" content="I'm an iOS Software Engineer based in London"/><meta name="og:description" content="I'm an iOS Software Engineer based in London"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Cabulas"/></head><body><header><div class="wrapper"><a class="site-name" href="/">Cabulas</a><nav><ul><li><a href="/articles">Articles</a></li><li><a href="/manifestos">Manifestos</a></li><li><a href="/tips">Tips</a></li></ul></nav></div></header><div class="wrapper"><h1>Libraries and Frameworks</h1><p>we can have three variations:</p><ul><li>Static Library</li><li>Dynamic Library</li><li>Framework (Dynamic or Static)</li></ul><h2>Static Library</h2><p>The simplest case. Just a bunch of code (entities and/or functions).</p><p>The process of merging external libraries with app’s source code files is known as linking.</p><p>Linked at compile time.</p><p>Static libraries are ending with <code>.a</code> suffix and are created with an archiver tool. If it sounds very similar to a ZIP archive, then it’s exactly what it is. You can think of a static library as an archive of multiple object files.</p><p>Object files have <em>Mach-O</em> format which is a special file format for iOS and macOS operating systems.</p><h2>Dynamic Library</h2><p>Linked at runtime time.</p><p>Only recently available to developers.</p><p>Dynamic libraries, as opposed to the static ones, rather than being copied into single monolithic executable, are loaded into memory when they are actually needed. This could happen either at load time or at runtime.</p><p>Dynamic libraries are usually shared between applications, therefore the system needs to store only one copy of the library and let different processes access it. As a result, invoking code and data from dynamic libraries happens slower than from the static ones.</p><p>All iOS and macOS system libraries are dynamic.</p><p>Note: Not sure but it seems Static libraries are ending with <code>.dylib</code> suffix.</p><h2>Framework</h2><p>Much more powerful and complex than a library.</p><p>Framework is a package that can contain resources such as dynamic libraries, strings, headers, images, storyboards etc. With small changes to its structure, it can even contain other frameworks. Such aggregate is known as umbrella framework.</p><p>Frameworks are also bundles ending with .framework extension. They can be accessed by NSBundle / Bundle class from code and, unlike most bundle files, can be browsed in the file system that makes it easier for developers to inspect its contents. Frameworks have versioned bundle format which allows to store multiple copies of code and headers to support older program version.</p><p>Note: It seems Static libraries are ending with <code>.framework</code> suffix.</p><p>Note: <code>Static framework</code> contain a <code>static library</code> packaged with its resources.</p><p><code>Dynamic framework</code> contains the <code>dynamic library</code> and resources. In addition to that, dynamic framework can include different versions of the same dynamic library in a single bundle</p><p>Note: <code>static</code> or <code>dynamic</code> in name usually points into a Linking type.</p><p>Frameworks can be <code>static</code> or <code>dynamic</code>.</p><p>You can change the format of library that will have an impact on a Linker by changing <code>Framework target -&gt; Build Settings -&gt; Mach-O Type</code> to <code>Static Library</code> or <code>Dynamic Library</code>. By default Xcode has <code>Dynamic Library</code> value.</p><h2>Important</h2><p>Paulo Andrade 33 minutes ago (IOS.PT)</p><p>Explicando o que faz primeiro cada uma se calhar é mais fácil depois perceber quando usar:</p><ul><li>Embed: A dependência vai incluída no output desse target. Se um .app target fizer embed de uma .framework, essa framework é copiada para o bundle da app (na pasta Frameworks. Idem para um .framework target. Uma framework também pode incluir outras frameworks.</li><li>Sign: Este não carece de explicação.</li></ul><p>Dito isto:</p><ol><li>Dependências estáticas nunca devem ser embedded. Isso não faz sentido visto que o código dessa dependência vai ser copiado para o binário do target atual.</li><li>Frameworks que dependam de outras frameworks apenas devem embebe-las se mais nenhum target depender destas (e mesmo assim é uma questão de opinião). Na grande maioria dos casos as frameworks não devem embeber dependências. A app principal é que deve embeber (mesmo que não link) as dependências todas (podem usar o Run Path Search Paths para dizer a todas as frameworks para irem procurar as dependências na app mãe, se necessário).</li><li>Frameworks targets não devem assinar nada, isto é um desperdício. O .app target é que deve ser assinado e ter o “Embed &amp; Sign” em todas as dependências dinâmicas.</li></ol><p>No ponto 3 pode existir um problema se a .framework que estão a copiar/assinar contém outras frameworks ou XPC services etc. Há uns tempos o Xcode não assinava essas dependências (não sei se isto ainda é verdade). Isto nunca será um problema se não tiverem frameworks a embeber outras frameworks como digo no ponto 2. Mas caso não tenham controlo sobre isso, a solução é adicionar um Run Script Phase para assinar isso corretamente.</p><h2>Resources</h2><p><a href="https://www.vadimbulavin.com/static-dynamic-frameworks-and-libraries/">https://www.vadimbulavin.com/static-dynamic-frameworks-and-libraries/</a></p><p><a href="https://stackoverflow.com/questions/15331056/library-static-dynamic-or-framework-project-inside-another-project/59216151#59216151">https://stackoverflow.com/questions/15331056/library-static-dynamic-or-framework-project-inside-another-project/59216151#59216151</a></p></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>