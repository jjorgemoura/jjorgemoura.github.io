<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Cabulas"/><link rel="canonical" href="https://jjorgemoura.github.io/extraTemp/previouswebsite/protocolOriented"/><meta name="twitter:url" content="https://jjorgemoura.github.io/extraTemp/previouswebsite/protocolOriented"/><meta name="og:url" content="https://jjorgemoura.github.io/extraTemp/previouswebsite/protocolOriented"/><title>Protocol Oriented Programming, the good, the bad and the ugly | Cabulas</title><meta name="twitter:title" content="Protocol Oriented Programming, the good, the bad and the ugly | Cabulas"/><meta name="og:title" content="Protocol Oriented Programming, the good, the bad and the ugly | Cabulas"/><meta name="description" content="Protocol Oriented Programming"/><meta name="twitter:description" content="Protocol Oriented Programming"/><meta name="og:description" content="Protocol Oriented Programming"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Cabulas"/></head><body><header><div class="wrapper"><a href="/" class="site-name">Cabulas</a><nav><ul><li><a href="/articles">Articles</a></li><li><a href="/tips">Tips</a></li><li><a href="/posts">My posts</a></li></ul></nav></div></header><div class="wrapper"><h1>Protocol Oriented Programming, the good, the bad and the ugly</h1><h2>The Good</h2><p>Types are first class citizens.</p><h2>The Bad</h2><p>The <code>Self</code> requirement. The type of <code>Self</code> is the type of the entity thsat conforms with the protocol.</p><p>One way to fix the <code>Self</code> requirement is to force entity to be homogeneous. This is achieved with generics and type constraint of the generic type.</p><h3>Two worlds of Protocols</h3><p>Without <code>Self</code> requirement</p><pre><code class="language-Swift">func precedes(other: Ordered) -&gt; Bool
</code></pre><p>Usable as a Type <code>func sort(inout a: [Ordered])</code></p><p>Think "heterogeneous"</p><p>Every model needs to deal with all others</p><p>Dynamic dispatch</p><p>Less optimizable</p><p>With <code>Self</code> requirement</p><pre><code class="language-Swift">func precedes(other: Self) -&gt; Bool
</code></pre><p>Only usable as a generic constraint <code>func sort&lt;T: Ordered&gt;(inout a: [T])</code></p><p>Think "homogeneous"</p><p>Models are free from interaction</p><p>Static dispatch</p><p>More optimizable</p><h2>The Ugly</h2><p>Having a downcast is a code smell.</p><pre><code class="language-swift">as! ASubclass
</code></pre><p>A sign that a type relationship was lost. Usually due to using classes for abstration.</p><h2>Other info</h2><p>Apple is also using <code>Structs</code> with <code>closures</code> instead of protocols (for a delegate).</p><h2>Resources</h2><p><a href="https://www.youtube.com/watch?v=xE5EcHuz52I">Protocol-oriented Programming in Swift</a></p><p><a href="https://www.swiftbysundell.com/podcast/71/">71: “Polymorphic interfaces”</a></p><p><a href="https://twitter.com/pointfreeco/status/1276547004882190342">https://twitter.com/pointfreeco/status/1276547004882190342</a></p></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>